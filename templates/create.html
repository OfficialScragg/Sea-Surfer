{% extends "base.html" %}

{% block title %}{{ "Edit" if payload else "Create" }} Payload - Sea Surfer{% endblock %}

{% block extra_css %}
<style>
    h1 {
        font-size: 1.5rem;
        font-weight: 500;
        margin-bottom: 32px;
    }
    
    .form-row {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 16px;
    }
    
    .options {
        display: flex;
        gap: 32px;
        margin-bottom: 24px;
    }
    
    .actions {
        display: flex;
        gap: 12px;
        padding-top: 16px;
        border-top: 1px solid var(--border);
    }
    
    .hint {
        font-size: 0.75rem;
        color: var(--text-dim);
        margin-top: 8px;
    }
</style>
{% endblock %}

{% block content %}
<h1>{{ "Edit" if payload else "Create" }} Payload</h1>

{% if error %}
<div class="error">{{ error }}</div>
{% endif %}

<form method="POST">
    <div class="form-row">
        <div class="form-group">
            <label for="slug">URL Slug</label>
            <input type="text" id="slug" name="slug" value="{{ slug or '' }}" placeholder="my-payload" required>
            <div class="hint">/p/your-slug</div>
        </div>
        
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" value="{{ payload.name if payload else '' }}" placeholder="My CSRF Payload" required>
        </div>
    </div>
    
    <div class="form-group">
        <label for="content">HTML Content</label>
        <textarea id="content" name="content" placeholder="<form action='https://target.com/api' method='POST'>&#10;  <input type='hidden' name='action' value='delete'>&#10;</form>">{{ payload.content if payload else '' }}</textarea>
        <div class="hint">Raw HTML that will be rendered. Include forms, scripts, etc.</div>
    </div>
    
    <div class="options">
        <div class="checkbox-group">
            <input type="checkbox" id="auto_submit" name="auto_submit" {{ 'checked' if payload and payload.auto_submit else '' }}>
            <label for="auto_submit">Auto-submit forms on load</label>
        </div>
        
        <div class="checkbox-group">
            <input type="checkbox" id="hide_form" name="hide_form" {{ 'checked' if payload and payload.hide_form else '' }}>
            <label for="hide_form">Hide content (invisible payload)</label>
        </div>
    </div>
    
    <div class="actions">
        <button type="submit" class="btn">{{ "Update" if payload else "Create" }} Payload</button>
        <a href="{{ dev_path }}" class="btn btn-ghost">Cancel</a>
    </div>
</form>
{% endblock %}
